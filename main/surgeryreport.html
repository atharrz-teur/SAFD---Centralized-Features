<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient History BBCode Generator</title>
    <link rel="icon" href="https://i.postimg.cc/V6qpRTsK/SAFD-LOGO-MINI2.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #38bdf8;
            --secondary: #818cf8;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --card-bg: rgba(30, 41, 59, 0.7);
            --text-color: #f8fafc;
            --input-bg: rgba(15, 23, 42, 0.5);
            --border-color: rgba(148, 163, 184, 0.1);
            --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
        }

        [data-theme="light"] {
            --primary: #2a5298;
            --secondary: #4cd1bb;
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --card-bg: rgba(255, 255, 255, 0.8);
            --text-color: #333333;
            --input-bg: rgba(0, 0, 0, 0.05);
            --border-color: rgba(0, 0, 0, 0.1);
            --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-gradient);
            color: var(--text-color);
            margin: 0;
            padding: 40px 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: auto;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            animation: slideUp 0.8s ease;
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        h2 {
            text-align: center;
            font-weight: 700;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .header-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 15px;
            gap: 10px;
        }

        .header-logo {
            width: 100px;
            height: 100px;
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
            transition: transform 0.3s ease;
        }
        .header-logo:hover { transform: scale(1.1); }

        .header-note {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: -5px;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        @media (max-width: 600px) {
            .header-logo { width: 80px; height: 80px; }
            h2 { font-size: 1.2rem; }
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0 0 20px 0;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-box {
            background: rgba(0, 0, 0, 0.2);
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        @media (max-width: 768px) {
            .grid-2 { grid-template-columns: 1fr; }
        }
        .full-width { grid-column: 1 / -1; }

        .form-group { position: relative; }
        
        label {
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 8px;
            display: block;
            opacity: 0.9;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            background: var(--input-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-color);
            font-family: inherit;
            transition: 0.3s;
            box-sizing: border-box;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(76, 209, 187, 0.2);
            background: rgba(255,255,255,0.1);
        }

        option { background: #333; color: white; }
        [data-theme="light"] option { background: white; color: #333; }

        .btn-group { display: flex; gap: 15px; margin-top: 30px; }

        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-generate { background: var(--primary); color: #fff; box-shadow: 0 4px 15px rgba(76, 209, 187, 0.3); }
        .btn-generate:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(76, 209, 187, 0.4); }

        .btn-copy { background: #444; color: #fff; }
        .btn-copy:hover { background: #555; }

        #output {
            width: 100%;
            height: 250px;
            margin-top: 30px;
            background: rgba(0,0,0,0.3);
            color: #ffffff;
            border: 1px solid var(--border-color);
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', monospace;
            resize: vertical;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(5px);
            z-index: 100;
            transition: 0.3s;
        }
        .theme-toggle:hover { transform: rotate(15deg); background: var(--primary); color: white; }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            backdrop-filter: blur(5px);
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
        }
        .back-btn:hover { background: var(--primary); color: white; transform: translateX(-5px); }

        .ss-row { display: flex; gap: 10px; margin-bottom: 10px; align-items: center; animation: fadeIn 0.3s ease; }
        .btn-remove-ss { background: #ef4444; color: white; width: 45px; padding: 12px; display: flex; align-items: center; justify-content: center; border-radius: 10px; transition: 0.3s; }
        .btn-remove-ss:hover { background: #dc2626; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3); }
        .btn-add-ss { background: var(--secondary); width: auto; display: inline-flex; padding: 10px 20px; font-size: 0.9rem; margin-top: 5px; border-radius: 10px; color: white; transition: 0.3s; }
        .btn-add-ss:hover { background: #6366f1; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .copyright {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            font-size: 0.8rem;
            opacity: 0.7;
        }
    </style>
</head>
<body>

<button class="theme-toggle" onclick="toggleTheme()">
    <i class="fas fa-moon"></i>
</button>

<a href="index.html" class="back-btn">
    <i class="fas fa-arrow-left"></i> Back
</a>

<div class="container">
    <div class="header-container">
        <img src="img/SAFD.png" alt="SAFD Logo" class="header-logo">
        <h2><i class="fas fa-file-medical-alt"></i> Surgery Report BBCode Generator</h2>
        <div class="header-note">San Andreas Fire Department • North Bureau</div>
    </div>
    
    <div class="section-box">
        <div class="section-title"><i class="fas fa-user-md"></i> PHYSICIAN INFORMATION</div>
        <div class="grid">
            <div class="form-group">
                <label>Physician Name</label>
                <input type="text" id="phy_name" placeholder="Physician Name">
            </div>
            <div class="form-group">
                <label>Rank</label>
                <input type="text" id="phy_rank" placeholder="Rank/Position">
            </div>
        </div>
    </div>

    <div class="section-box">
        <div class="section-title"><i class="fas fa-user-injured"></i> PATIENT INFORMATION</div>
        <div class="grid">
            <div class="form-group">
                <label>Patient Name</label>
                <input type="text" id="pat_name" placeholder="Patient Name">
            </div>
            <div class="form-group">
                <label>Age</label>
                <input type="text" id="pat_age" placeholder="Age">
            </div>
            <div class="form-group">
                <label>Gender</label>
                <select id="pat_gender">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
        </div>
    </div>

    <div class="section-box">
        <div class="section-title"><i class="fas fa-notes-medical"></i> ASSESSMENT</div>
        <div class="grid">
            <div class="form-group">
                <label>Type (Surgery/Blood/etc)</label>
                <input type="text" id="ass_type" placeholder="e.g. Surgery">
            </div>
            <div class="form-group">
                <label>Injury (GSW/Fracture/etc)</label>
                <input type="text" id="ass_injury" placeholder="e.g. GSW">
            </div>
            <div class="form-group">
                <label>LOC on Arrival (A/V/P/U)</label>
                <select id="ass_loc">
                    <option value="A">Alert (A)</option>
                    <option value="V">Verbal (V)</option>
                    <option value="P">Pain (P)</option>
                    <option value="U">Unresponsive (U)</option>
                </select>
            </div>
        </div>
    </div>

    <div class="section-box">
        <div class="section-title"><i class="fas fa-heartbeat"></i> VITALS ON ARRIVAL</div>
        <div class="grid grid-2">
            <div class="form-group">
                <label>Circulation (/min)</label>
                <input type="text" id="vit_circ" placeholder="60-120">
            </div>
            <div class="form-group">
                <label>Breathing (L/min)</label>
                <input type="text" id="vit_breath" placeholder="12-18">
            </div>
            <div class="form-group full-width">
                <label>Airway</label>
                <input type="text" id="vit_air" placeholder="Normal / Abnormal (Explain)">
            </div>
        </div>
    </div>

    <div class="section-box">
        <div class="section-title"><i class="fas fa-procedures"></i> TREATMENT & FINAL</div>
        <div class="grid grid-2">
            <div class="form-group">
                <label>Medicines</label>
                <input type="text" id="meds" placeholder="Clarithromycin, etc">
            </div>
            <div class="form-group">
                <label>Anesthesia</label>
                <input type="text" id="anes" placeholder="Local/General">
            </div>
            <div class="form-group full-width">
                <label>Summary</label>
                <textarea id="summary" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label>Recovery Status</label>
                <select id="status">
                    <option value="Improved">Improved</option>
                    <option value="Worsened">Worsened</option>
                    <option value="Deceased">Deceased</option>
                </select>
            </div>
            <div class="form-group">
                <label>Date (DD/MM/YY)</label>
                <input type="text" id="date" placeholder="01/01/26">
            </div>
            <div class="form-group full-width">
                <label>Screenshot Image URLs</label>
                <div id="ss_container">
                    <div class="ss-row"><input type="text" class="ss-url-input" placeholder="https://i.postimg.cc/..."></div>
                </div>
                <button type="button" class="btn-add-ss" onclick="addScreenshotInput()"><i class="fas fa-plus"></i> Add Screenshot</button>
            </div>
            <div class="form-group full-width">
                <label>Signature (Name/Initial)</label>
                <input type="text" id="signature" placeholder="Abertforth Zeonathaan">
            </div>
        </div>
    </div>

    <div class="btn-group">
        <button class="btn-generate" onclick="generateBBCode()"><i class="fas fa-magic"></i> Generate BBCode</button>
        <button class="btn-copy" onclick="copyBBCode()"><i class="fas fa-copy"></i> Copy Code</button>
    </div>

    <textarea id="output" readonly placeholder="BBCode result will appear here..."></textarea>

    <div class="copyright">
        &copy; 2026 San Andreas Fire Department • North Bureau<br>
        Developed by Abertforth Zeonathaan - Athar
    </div>
</div>

<script>
function toggleTheme() {
    const body = document.body;
    const icon = document.querySelector('.theme-toggle i');
    if (body.getAttribute('data-theme') === 'light') {
        body.removeAttribute('data-theme');
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
    } else {
        body.setAttribute('data-theme', 'light');
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
    }
}

function addScreenshotInput() {
    const container = document.getElementById('ss_container');
    const div = document.createElement('div');
    div.className = 'ss-row';
    div.innerHTML = `
        <input type="text" class="ss-url-input" placeholder="https://i.postimg.cc/...">
        <button type="button" class="btn-remove-ss" onclick="this.parentElement.remove()"><i class="fas fa-trash"></i></button>
    `;
    container.appendChild(div);
    div.querySelector('input').focus();
}

function generateBBCode() {
    const data = {
        phy_name: document.getElementById('phy_name').value,
        phy_rank: document.getElementById('phy_rank').value,
        pat_name: document.getElementById('pat_name').value,
        pat_age: document.getElementById('pat_age').value,
        pat_gender: document.getElementById('pat_gender').value,
        ass_type: document.getElementById('ass_type').value,
        ass_injury: document.getElementById('ass_injury').value,
        ass_loc: document.getElementById('ass_loc').value,
        vit_circ: document.getElementById('vit_circ').value,
        vit_air: document.getElementById('vit_air').value,
        vit_breath: document.getElementById('vit_breath').value,
        meds: document.getElementById('meds').value,
        anes: document.getElementById('anes').value,
        summary: document.getElementById('summary').value,
        status: document.getElementById('status').value,
        date: document.getElementById('date').value,
        sign: document.getElementById('signature').value
    };

    let statusColor = "#00BF00";
    if(data.status === "Worsened") statusColor = "#FF0000";
    if(data.status === "Deceased") statusColor = "#800000";

    const ssInputs = document.querySelectorAll('.ss-url-input');
    const ssLines = Array.from(ssInputs).map(input => input.value).filter(val => val.trim() !== '');
    const ssBBCode = ssLines.length > 0 ? ssLines.map(url => `[img]${url.trim()}[/img]`).join('\n') : '';

    const bbcode = `[divbox=white][center][img]https://i.postimg.cc/RFd9JsR5/safdjg-2020-resized-2.png[/img][/center]
[hr][/hr]
[center][b][u][size=150]P[/size][size=137]ATIENT[/size] [size=150]H[/size][size=137]ISTORY[/size][/u][/b][/center]

[u][size=140][b]P[/b][/size][size=125]HYSICIAN[/size] [size=140][b]I[/b][/size][size=125]NFORMATION[/size][/u]
[b][size=105]Name:[/size][/b] ${data.phy_name}
[b][size=105]Rank:[/size][/b] ${data.phy_rank}
[hr][/hr]
[u][size=140][b]P[/b][/size][size=125]ATIENT[/size] [size=140][b]I[/b][/size][size=125]NFORMATION[/size][/u]
[b][size=105]Name:[/size][/b] ${data.pat_name}
[b][size=105]Age:[/size][/b] ${data.pat_age}
[b][size=105]Gender:[/size][/b] ${data.pat_gender}
[hr][/hr]

[u][size=140][b]A[/b][/size][size=125]SSESSMENT[/size] [size=140][b]I[/b][/size][size=125]NFORMATION[/size][/u]
[b][size=105]Type:[/size][/b] ${data.ass_type}
[b][size=105]Injury:[/size][/b] ${data.ass_injury}
[b][size=105]LOC on arrival:[/size][/b] ${data.ass_loc}

[b][size=105][u][u]Vitals on arrival[/u][/u][/size][/b]
[b]Circulation:[/b] ${data.vit_circ} / minute
[b]Airway:[/b] ${data.vit_air}
[b]Breathing:[/b] ${data.vit_breath} L / minute

[b][size=105]Medicines:[/size][/b] ${data.meds}
[b][size=105]Anesthesia:[/size][/b] ${data.anes} //[size=85](Ether, Lydocaine HCl, etc)[/size]
[b][size=105]Summary:[/size][/b] ${data.summary}
[hr][/hr]
[u][size=140][b]F[/b][/size][size=125]INAL[/size] [size=140][b]I[/b][/size][size=125]NFORMATION[/size][/u]
[b][size=105]Recovery Status:[/size][/b] [color=${statusColor}][b]${data.status}[/b][/color]
[right]${data.date}[/right]
[right]${data.sign}[/right]

[altspoiler=SCREENSHOT]${ssBBCode}[/altspoiler]
[/divbox]`;

    document.getElementById('output').value = bbcode;
    // Scroll to output
    document.getElementById('output').scrollIntoView({ behavior: 'smooth' });
}

function copyBBCode() {
    const output = document.getElementById('output');
    output.select();
    document.execCommand('copy');
    
    const btn = document.querySelector('.btn-copy');
    const originalText = btn.innerHTML;
    btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
    setTimeout(() => {
        btn.innerHTML = originalText;
    }, 2000);
}
</script>

</body>
</html>